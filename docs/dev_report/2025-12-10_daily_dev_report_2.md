# 2025-12-10 일일 개발 보고서 (2차)

## 1. 개요
| 항목 | 내용 |
| :--- | :--- |
| **날짜** | 2025년 12월 10일 |
| **진행 작업** | CI/CD 파이프라인 구축, 트러블슈팅, 문서화 체계 정비 |
| **커밋 내역** | `80c086d` fix: 배포 스크립트 수정...<br>`d70e562` ci: GitHub Actions 배포...<br>`d6156ad` docs: 파일명 변경 |

### 📝 요약
GitHub Actions를 활용한 **자동 배포(CI/CD) 파이프라인을 구축**하고, 초기 배포 시 발생했던 **502 에러 및 의존성 모듈 로딩 실패 문제를 해결**했습니다. 또한, 이슈 추적 효율화를 위해 문서 파일명 규칙을 정비하여 **Git Issues와 문서 간의 연결성을 강화**했습니다.

---

## 2. 진행 작업

### 2.1. CI/CD 파이프라인 구축 (Issue #3)
- **목적**: 수동 배포로 인한 실수 방지 및 배포 과정 자동화를 통한 개발 효율성 증대.
- **변경 사항**:
  - `.github/workflows/deploy.yml` 추가: `main` 푸시 시 자동 배포 워크플로우 정의.
  - `package.json` 스크립트 추가: `build:clean` 등 빌드 전처리 과정 강화.
- **변경 파일**:
  - `.github/workflows/deploy.yml`
  - `package.json`
- **후속 작업 제안**:
  1. **슬랙/디스코드 알림 연동**: 배포 성공/실패 여부를 메신저로 알림 받도록 설정.
  2. **스테이징 환경 분리**: `develop` 브랜치용 테스트 배포 환경 구성 고려.
  3. **자동화 테스트 추가**: 배포 전 `npm test`를 수행하여 코드 무결성 검증 추가.
  4. **캐시 전략 최적화**: `npm install` 속도 개선을 위한 레이어 캐싱 도입 검토.
  5. **롤백 메커니즘**: 배포 실패 시 이전 버전으로 자동 원복하는 스크립트 작성.

### 2.2. 배포 트러블슈팅 (502 에러 및 모듈 로딩 실패)
- **목적**: CI/CD 적용 후 발생한 서버 가동 실패 원인 분석 및 해결.
- **변경 사항**:
  - 배포 스크립트 수정: 단순 `npm ci`에서 `rm -rf node_modules`를 포함한 클린 인스톨로 변경.
  - PM2 프로세스 재시작 방식 변경: `restart` 대신 `delete` 후 `start`로 프로세스 초기화.
  - 빌드 단계 누락 수정: 수동 복구 과정에서 누락된 `npm run build` 수행.
- **관련 파일**:
  - `docs/troubleshooting/issue_ci_cd_deployment_failure.md` (신규 작성)
- **후속 작업 제안**:
  1. **헬스 체크 API 구현**: `/health` 엔드포인트를 만들어 배포 직후 자동 검증.
  2. **로그 모니터링 강화**: 에러 발생 시 로그를 파일뿐만 아니라 실시간 대시보드로 확인하는 방안 모색.
  3. **PM2 설정 고도화**: `max_memory_restart` 등 안정성 옵션 튜닝.
  4. **도커 컨테이너화 검토**: 환경 일관성을 완벽히 보장하기 위해 Docker 도입 고려.
  5. **배포 스크립트 모듈화**: 쉘 스크립트를 별도 파일로 분리하여 유지보수성 향상.

### 2.3. 문서화 체계 정비
- **목적**: 문서 파일명과 Git Issue 간의 연계성을 높여 작업 이력을 체계적으로 관리.
- **변경 사항**:
  - `docs/issue` 내 파일명 변경 (`Issue_[name].md` -> `[tag]_[title].md`).
  - Git Issue Close 시 문서 링크를 포함한 종료 코멘트 작성 프로세스 확립.
- **후속 작업 제안**:
  1. **이슈 템플릿 적용**: GitHub Issue 생성 시 템플릿 자동 적용 설정.
  2. **PR 템플릿 적용**: PR 작성 시 체크리스트 등 템플릿 자동 적용.
  3. **Wiki 연동**: 주요 문서를 GitHub Wiki로 이관하거나 미러링하는 방안 검토.
  4. **CHANGELOG 자동화**: 커밋 메시지 기반으로 변경 이력 자동 생성 도구 도입.
  5. **아키텍처 문서화**: 현재 시스템 구조를 다이어그램으로 문서화하여 `docs/plan`에 추가.

---

## 3. 현재 상태
### 📊 프로젝트 분석
- **완성도**: 핵심 기능(단어장, 학습) 구현 완료, 로그인(Firebase) 및 배포(Action) 인프라 구축 완료.
- **안정성**: CI/CD 도입으로 안정적인 배포 환경 마련. 트러블슈팅을 통해 운영 노하우 축적.
- **확장성**: Service Layer 도입이 예정되어 있어 비즈니스 로직 확장성 확보 중.

### 🚀 향후 개발 목표
**"사용자 경험(UX) 고도화 및 코드 아키텍처 개선"**
1. **로그인 세션 지속성**: 새로고침 해도 로그인이 풀리지 않도록 개선. (Issue #4)
2. **코드 리팩토링**: 컨트롤러 비대화 방지 및 비즈니스 로직 분리. (Issue #6)
3. **보안 강화**: 인증/인가 로직의 중앙화 및 설정 분리. (Issue #5)

---

## 4. 개선사항
### 💡 코드 및 구조 개선
1. **서비스 레이어 분리 시급**: 현재 `server.js`나 라우터에 비즈니스 로직이 혼재되어 있어, 이를 분리하는 작업(Issue #6)이 최우선 과제임.
2. **환경 변수 검증**: 서버 시작 시 필수 환경 변수(`DB_URL`, `JWT_SECRET` 등) 존재 여부를 체크하는 로직 추가 필요.
3. **에러 핸들링 표준화**: 트러블슈팅 때 발견된 `unhandledRejection` 등을 방지하기 위해 전역 에러 핸들러(`asyncWrap` 등) 도입 필요.

### ⚠️ 잠재적 리스크
1. **PM2와 .env 로딩**: PM2 실행 시점의 환경 변수 로딩 방식(`ecosystem.config.cjs` vs `.env` 파일) 혼동 가능성. 명확한 가이드 필요.
2. **빌드 아티팩트 용량**: 클라이언트 번들 사이즈가 커지고 있어(`Warning` 발생 중), Code Splitting 최적화 필요.

---

## 5. 최종 요약
| 구분 | 내용 | 비고 |
| :--- | :--- | :--- |
| **핵심 성과** | **GitHub Actions CI/CD 구축 완료, 502 배포 에러 해결** | 자동화 성공 |
| **해결 과제** | 의존성 모듈 로딩 에러, 정적 파일 Not Found 해결 | 문서화 완료 |
| **다음 목표** | **로그인 세션 유지(Issue #4), 서비스 레이어 분리(Issue #6)** | 리팩토링 중심 |

> 오늘 작업으로 배포 자동화라는 큰 산을 넘었습니다. 이제 기능 구현과 코드 품질 향상에 집중할 수 있는 환경이 마련되었습니다. 🚀
